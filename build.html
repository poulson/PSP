

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Build system &mdash; Parallel Sweeping Preconditioner 0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/print.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/theme_extras.js"></script>
    <link rel="top" title="Parallel Sweeping Preconditioner 0.1 documentation" href="index.html" />
    <link rel="next" title="The DistUniformGrid class" href="dist_uniform_grid.html" />
    <link rel="prev" title="Introduction" href="intro.html" /> 
  </head>
  <body>
      <div class="header"><h1 class="heading"><a href="index.html">
          <span>Parallel Sweeping Preconditioner 0.1 documentation</span></a></h1>
        <h2 class="heading"><span>Build system</span></h2>
      </div>
      <div class="topnav">
      
        <p>
        «&#160;&#160;<a href="intro.html">Introduction</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="dist_uniform_grid.html">The <tt class="docutils literal"><span class="pre">DistUniformGrid</span></tt> class</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="build-system">
<h1>Build system<a class="headerlink" href="#build-system" title="Permalink to this headline">¶</a></h1>
<p>PSP&#8217;s build system sits on top of
<a class="reference external" href="http://poulson.github.com/Clique/build.html">Clique&#8217;s</a>, which in turn
is a wrapper for
<a class="reference external" href="http://poulson.github.com/Elemental/build.html">Elemental&#8217;s</a>,
and so it would be helpful to get a basic understanding of their build systems
first.</p>
<div class="section" id="getting-psp-s-source">
<h2>Getting PSP&#8217;s source<a class="headerlink" href="#getting-psp-s-source" title="Permalink to this headline">¶</a></h2>
<p>The best way to download PSP&#8217;s source is to install
<a class="reference external" href="http://mercurial.selenic.com">Mercurial</a> and run</p>
<div class="highlight-python"><pre>hg clone http://bitbucket.org/poulson/psp psp</pre>
</div>
</div>
<div class="section" id="building-psp">
<h2>Building PSP<a class="headerlink" href="#building-psp" title="Permalink to this headline">¶</a></h2>
<p>PSP can be built in essentially the same way as Clique and Elemental: their
respective build processes are described
<a class="reference external" href="http://poulson.github.com/Elemental/build.html#building-elemental">here</a> and
<a class="reference external" href="http://poulson.github.com/Clique/build.html#building-clique">here</a>.
Assuming that all of
<a class="reference external" href="http://poulson.github.com/Elemental/build.html#dependencies">dependencies</a>
have been installed, PSP can often be built and installed using the commands:</p>
<div class="highlight-python"><pre>cd psp
mkdir build
cd build
cmake ..
make
make install</pre>
</div>
<p>Note that the default install location is system-wide, e.g., <tt class="docutils literal"><span class="pre">/usr/local</span></tt>.
The installation directory can be changed at any time by running</p>
<div class="highlight-python"><pre>cmake -D CMAKE_INSTALL_PREFIX=/your/desired/install/path ..
make install</pre>
</div>
</div>
<div class="section" id="testing-the-installation">
<h2>Testing the installation<a class="headerlink" href="#testing-the-installation" title="Permalink to this headline">¶</a></h2>
<p>Once PSP has been installed, it is easy to test whether or not it is
functioning. Assuming that PSP&#8217;s source code sits in the directory
<tt class="docutils literal"><span class="pre">/home/username/psp</span></tt>, and that PSP was installed in <tt class="docutils literal"><span class="pre">/usr/local</span></tt>, then one
can create the following Makefile from any directory:</p>
<div class="highlight-python"><pre>include /usr/local/conf/pspvariables

UnitCube: /home/username/psp/tests/UnitCube.cpp
    ${CXX} ${PSP_COMPILE_FLAGS} $&lt; -o $@ ${PSP_LINK_FLAGS} ${PSP_LIBS}</pre>
</div>
<p>and then simply running <tt class="docutils literal"><span class="pre">make</span></tt> should build the test driver.</p>
<p>You can also build a handful of test drivers by using the CMake option:</p>
<div class="highlight-python"><pre>-D PSP_TESTS=ON</pre>
</div>
</div>
<div class="section" id="psp-as-a-subproject">
<h2>PSP as a subproject<a class="headerlink" href="#psp-as-a-subproject" title="Permalink to this headline">¶</a></h2>
<p>Adding PSP as a dependency into a project which uses CMake for its build
system is relatively straightforward: simply put an entire copy of the
PSP source tree in a subdirectory of your main project folder, say
<tt class="docutils literal"><span class="pre">external/psp</span></tt>, and then create a <tt class="docutils literal"><span class="pre">CMakeLists.txt</span></tt> in your main project
folder that builds off of the following snippet:</p>
<div class="highlight-python"><pre>cmake_minimum_required(VERSION 2.8.5)
project(Foo)

add_subdirectory(external/psp)
include_directories("${PROJECT_BINARY_DIR}/external/psp/include")
include_directories("${PROJECT_BINARY_DIR}/external/psp/external/clique/include")
if(HAVE_PARMETIS)
  include_directories(
    "${PROJECT_SOURCE_DIR}/external/psp/external/clique/external/parmetis/include"
  )
  include_directories(
    "${PROJECT_SOURCE_DIR}/external/psp/external/clique/external/parmetis/metis/include"
  )
endif()
include_directories(
  "${PROJECT_BINARY_DIR}/external/psp/external/clique/external/elemental/include")
)
include_directories(${MPI_CXX_INCLUDE_PATH})

# Build your project here
# e.g.,
#   add_library(foo ${LIBRARY_TYPE} ${FOO_SRC})
#   target_link_libraries(foo psp)</pre>
</div>
</div>
<div class="section" id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline">¶</a></h2>
<p>If you run into problems, please email
<a class="reference external" href="mailto:jack&#46;poulson&#37;&#52;&#48;gmail&#46;com">jack<span>&#46;</span>poulson<span>&#64;</span>gmail<span>&#46;</span>com</a>. If you are having
build problems, please make sure to attach the file <tt class="docutils literal"><span class="pre">include/psp/config.h</span></tt>,
which should be generated within your build directory.</p>
</div>
</div>


      </div>
      <div class="bottomnav">
      
        <p>
        «&#160;&#160;<a href="intro.html">Introduction</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="dist_uniform_grid.html">The <tt class="docutils literal"><span class="pre">DistUniformGrid</span></tt> class</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer">
        &copy; Copyright 2012, Jack Poulson.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>